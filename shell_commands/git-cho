#!/bin/bash

#USER=$(gh api /user --jq '.login')
#
#gh pr list --json 'number,title,author,headRefName' \
#  --jq ".[] | select(.author.login == \"$USER\") | [.number, .title, .headRefName] | @csv" | \
#  tr ',' '\t' | cho | cut -f 3 | tr -d '"' | xargs git checkout

gh pr list --json 'number,title,author,headRefName' \
  --jq ".[] | [.number, .author.login, .title, .headRefName] | @csv" | \
  column -t -s',' | peco | sed 's/.*"\([^"]*\)"$/origin\/\1/' | xargs git checkout -t
