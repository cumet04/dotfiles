# 理由は全然わからないが、var_filesを使うには一旦var_filesなしのホストを実行しないと謎のエラーになる
- hosts: localhost
  tasks: []

- hosts: localhost
  vars_files:
    - variables
  tasks:
    - name: apt update cache
      become: true
      apt:
          update_cache: yes
    - include: packages.yaml
    - include: wsl.yaml
    - include: dotfiles.yaml
    - include: anyenv.yaml
    - include: commands.yaml
    - include: docker-ce.yaml
    - include: golang.yaml
    - include: google-cloud-sdk.yaml
    - include: azure-cli.yaml
  handlers:
    - name: restart systemd-timesyncd
      become: true
      systemd:
        name: systemd-timesyncd.service
        state: restarted
        daemon_reload: yes
